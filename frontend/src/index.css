@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Yang Wen-li Theme — Intelligence Platform */
@theme {
  /* Sector Colors — CLAUDE.md spec (canonical source of truth) */
  --color-sector-salud: #dc2626;
  --color-sector-educacion: #3b82f6;
  --color-sector-infraestructura: #ea580c;
  --color-sector-energia: #eab308;
  --color-sector-defensa: #1e3a5f;
  --color-sector-tecnologia: #8b5cf6;
  --color-sector-hacienda: #16a34a;
  --color-sector-gobernacion: #be123c;
  --color-sector-agricultura: #22c55e;
  --color-sector-ambiente: #10b981;
  --color-sector-trabajo: #f97316;
  --color-sector-otros: #64748b;

  /* Risk Colors — Soft Red/Yellow/Green palette */
  --color-risk-critical: #f87171;
  --color-risk-high: #fb923c;
  --color-risk-medium: #fbbf24;
  --color-risk-low: #4ade80;

  /* Dark Theme (Default) — Deep intelligence aesthetic */
  --color-background: #06080d;
  --color-background-card: #0d1117;
  --color-background-elevated: #161b22;
  --color-border: #21262d;
  --color-border-hover: #30363d;
  --color-text-primary: #e6edf3;
  --color-text-secondary: #8b949e;
  --color-text-muted: #6e7681;
  --color-accent: #58a6ff;
  --color-accent-hover: #388bfd;
  --color-accent-glow: #58a6ff33;

  /* Sidebar */
  --color-sidebar: #010409;
  --color-sidebar-hover: #0d1117;
  --color-sidebar-active: #161b22;

  /* Signal colors for live indicators */
  --color-signal-pulse: #58a6ff;
  --color-signal-live: #3fb950;
  --color-signal-warn: #d29922;

  /* Typography */
  --font-family-mono: "JetBrains Mono", "Fira Code", "SF Mono", Consolas, monospace;
  --font-family-sans: "Inter", system-ui, -apple-system, sans-serif;

  /* Typography Scale */
  --font-size-display: 3rem;
  --font-size-h1: 2rem;
  --font-size-h2: 1.5rem;
  --font-size-h3: 1.25rem;
  --font-size-body: 1rem;
  --font-size-small: 0.875rem;
  --font-size-tiny: 0.75rem;

  /* Named container widths — these drive max-w-xs/sm/md/lg/xl/2xl utilities in Tailwind v4 */
  --spacing-xs: 20rem;   /* 320px  — matches Tailwind v3 max-w-xs  */
  --spacing-sm: 24rem;   /* 384px  — matches Tailwind v3 max-w-sm  */
  --spacing-md: 28rem;   /* 448px  — matches Tailwind v3 max-w-md  */
  --spacing-lg: 32rem;   /* 512px  — matches Tailwind v3 max-w-lg  */
  --spacing-xl: 36rem;   /* 576px  — matches Tailwind v3 max-w-xl  */
  --spacing-2xl: 42rem;  /* 672px  — matches Tailwind v3 max-w-2xl */
}

/* Base Styles */
@layer base {
  :root {
    font-family: var(--font-family-sans);
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
    font-synthesis: none;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  html {
    color-scheme: dark;
  }

  /* Light theme */
  html:not(.dark) {
    color-scheme: light;
    --color-background: #f6f8fa;
    --color-background-card: #ffffff;
    --color-background-elevated: #f0f2f5;
    --color-border: #d0d7de;
    --color-border-hover: #afb8c1;
    --color-text-primary: #1f2328;
    --color-text-secondary: #656d76;
    --color-text-muted: #8b949e;
    --color-accent: #0969da;
    --color-accent-hover: #0550ae;
    --color-accent-glow: #0969da22;
    --color-sidebar: #ffffff;
    --color-sidebar-hover: #f6f8fa;
    --color-sidebar-active: #eaeef2;
    --color-signal-pulse: #0969da;
    --color-signal-live: #1a7f37;
    --color-signal-warn: #9a6700;
  }

  body {
    @apply bg-background text-text-primary m-0;
    min-height: 100vh;
  }

  .tabular-nums {
    font-variant-numeric: tabular-nums;
    font-family: var(--font-family-mono);
  }

  :focus-visible {
    @apply outline-2 outline-accent outline-offset-2;
    box-shadow: 0 0 0 4px var(--color-accent-glow);
  }

  .skip-link {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50;
    @apply focus:px-4 focus:py-2 focus:bg-accent focus:text-white focus:rounded-md;
  }

  /* Typography */
  .text-display {
    font-size: var(--font-size-display);
    line-height: 1.1;
    font-weight: 700;
    letter-spacing: -0.02em;
  }

  h1, .text-h1 { font-size: var(--font-size-h1); line-height: 1.2; font-weight: 600; letter-spacing: -0.01em; }
  h2, .text-h2 { font-size: var(--font-size-h2); line-height: 1.3; font-weight: 600; }
  h3, .text-h3 { font-size: var(--font-size-h3); line-height: 1.4; font-weight: 500; }
  .text-small { font-size: var(--font-size-small); line-height: 1.5; }
  .text-tiny { font-size: var(--font-size-tiny); line-height: 1.5; }
}

/* Scrollbar */
@layer base {
  ::-webkit-scrollbar { width: 6px; height: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { @apply bg-border/60 rounded-full; }
  ::-webkit-scrollbar-thumb:hover { @apply bg-border-hover; }
}

/* Utility Classes */
@layer utilities {
  /* Cards — glass morphism */
  .card {
    @apply bg-background-card border border-border rounded-xl;
    transition: box-shadow 0.2s ease, border-color 0.2s ease, transform 0.2s ease;
  }

  .card:hover {
    @apply border-border-hover;
    box-shadow: 0 0 20px -5px var(--color-accent-glow);
  }

  .card-elevated {
    @apply bg-background-elevated border border-border rounded-xl;
    box-shadow: 0 4px 24px -8px rgba(0,0,0,0.3);
  }

  .text-gradient {
    @apply bg-clip-text text-transparent;
    background-image: linear-gradient(135deg, var(--color-accent), #60a5fa);
  }

  /* Risk badges */
  .risk-critical { @apply bg-risk-critical/15 text-risk-critical border border-risk-critical/30; }
  .risk-high { @apply bg-risk-high/15 text-risk-high border border-risk-high/30; }
  .risk-medium { @apply bg-risk-medium/20 text-risk-medium border border-risk-medium/30; }
  .risk-low { @apply bg-risk-low/15 text-risk-low border border-risk-low/30; }

  html:not(.dark) .risk-critical { @apply bg-risk-critical/10 text-[#dc2626] border-risk-critical/25; }
  html:not(.dark) .risk-high { @apply bg-risk-high/10 text-[#ea580c] border-risk-high/25; }
  html:not(.dark) .risk-medium { @apply bg-risk-medium/10 text-[#d97706] border-risk-medium/25; }
  html:not(.dark) .risk-low { @apply bg-risk-low/10 text-[#16a34a] border-risk-low/25; }

  .sector-badge { @apply inline-flex items-center gap-1.5 px-2 py-0.5 rounded-md text-xs font-medium; }
  .chart-tooltip { @apply rounded-lg border border-border bg-background-card p-2 shadow-lg text-sm; }

  /* Live signal pulse */
  .signal-live {
    position: relative;
  }
  .signal-live::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--color-signal-live);
    box-shadow: 0 0 8px var(--color-signal-live);
    animation: signalPulse 2s ease-in-out infinite;
  }

  /* Accent glow for active elements */
  .glow-accent {
    box-shadow: 0 0 15px -3px var(--color-accent-glow);
  }

  /* Scanline overlay — subtle CRT/radar effect */
  .scanline-overlay {
    position: relative;
  }
  .scanline-overlay::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(255,255,255,0.01) 2px,
      rgba(255,255,255,0.01) 4px
    );
    z-index: 1;
    border-radius: inherit;
  }

  /* Grid pattern for backgrounds */
  .grid-pattern {
    background-image:
      linear-gradient(var(--color-border) 1px, transparent 1px),
      linear-gradient(90deg, var(--color-border) 1px, transparent 1px);
    background-size: 60px 60px;
    background-position: -1px -1px;
    opacity: 0.15;
  }

  /* Animations */
  .animate-fade-in { animation: fadeIn 0.3s ease-out; }
  .animate-slide-up { animation: slideUp 0.3s ease-out forwards; }
  .animate-slide-in-right { animation: slideInRight 0.3s ease-out; }
  .animate-pulse-subtle { animation: pulseSubtle 2s ease-in-out infinite; }

  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes slideInRight { from { opacity: 0; transform: translateX(10px); } to { opacity: 1; transform: translateX(0); } }
  @keyframes pulseSubtle { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
  @keyframes signalPulse {
    0%, 100% { opacity: 1; box-shadow: 0 0 8px var(--color-signal-live); }
    50% { opacity: 0.5; box-shadow: 0 0 16px var(--color-signal-live), 0 0 32px var(--color-signal-live); }
  }

  .animate-shimmer {
    animation: shimmer 2s linear infinite;
    background: linear-gradient(90deg, var(--color-background-elevated) 0%, var(--color-border) 50%, var(--color-background-elevated) 100%);
    background-size: 200% 100%;
  }
  @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

  .stagger-animate > * { opacity: 0; animation: fadeSlideUp 0.4s ease-out forwards; }
  .stagger-animate > *:nth-child(1) { animation-delay: 0ms; }
  .stagger-animate > *:nth-child(2) { animation-delay: 50ms; }
  .stagger-animate > *:nth-child(3) { animation-delay: 100ms; }
  .stagger-animate > *:nth-child(4) { animation-delay: 150ms; }
  .stagger-animate > *:nth-child(5) { animation-delay: 200ms; }
  .stagger-animate > *:nth-child(6) { animation-delay: 250ms; }
  .stagger-animate > *:nth-child(7) { animation-delay: 300ms; }
  .stagger-animate > *:nth-child(8) { animation-delay: 350ms; }

  @keyframes fadeSlideUp {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Nav active indicator — left accent bar */
  .nav-active-indicator {
    position: relative;
  }
  .nav-active-indicator::before {
    content: '';
    position: absolute;
    left: 0;
    top: 4px;
    bottom: 4px;
    width: 3px;
    border-radius: 0 3px 3px 0;
    background: var(--color-accent);
    box-shadow: 0 0 8px var(--color-accent-glow);
  }

  .hover-lift { @apply transition-all duration-200; }
  .hover-lift:hover { transform: translateY(-1px); }

  .interactive { @apply transition-colors duration-150 cursor-pointer; }
  .interactive:hover { @apply bg-background-elevated; }

  .data-cell { @apply px-3 py-2 text-sm border-b border-border; }
  .data-cell-header { @apply px-3 py-2 text-xs font-medium text-text-muted uppercase tracking-wider bg-background-elevated border-b border-border; }

  /* LoGH — Tactical frame corners (Legend of the Galactic Heroes) */
  /* Apply to any hero section: adds 4 subtle L-bracket corners */
  .logh-frame {
    position: relative;
  }
  .logh-frame > .logh-corner {
    position: absolute;
    width: 14px;
    height: 14px;
    pointer-events: none;
    border-color: rgba(88, 166, 255, 0.28);
    border-style: solid;
    z-index: 2;
  }
  .logh-frame > .logh-corner-tl { top: -1px; left: -1px; border-width: 1.5px 0 0 1.5px; }
  .logh-frame > .logh-corner-tr { top: -1px; right: -1px; border-width: 1.5px 1.5px 0 0; }
  .logh-frame > .logh-corner-bl { bottom: -1px; left: -1px; border-width: 0 0 1.5px 1.5px; }
  .logh-frame > .logh-corner-br { bottom: -1px; right: -1px; border-width: 0 1.5px 1.5px 0; }
}

/* LoGH — Star field background (dark mode only) */
/* 50 hand-placed stars across the viewport at 5–8% white opacity */
/* Named after Yang Wen-li's home: the space between the stars */
html:not(.dark) body::before { display: none; }
body::before {
  content: '';
  position: fixed;
  top: 0; left: 0;
  width: 1px; height: 1px;
  background: transparent;
  border-radius: 50%;
  pointer-events: none;
  z-index: 0;
  box-shadow:
    142px  87px rgba(255,255,255,0.07),
    487px 203px rgba(255,255,255,0.05),
    891px 145px rgba(255,255,255,0.08),
   1203px  67px rgba(255,255,255,0.06),
   1654px 289px rgba(255,255,255,0.05),
     73px 356px rgba(255,255,255,0.07),
    334px 412px rgba(255,255,255,0.04),
    678px 523px rgba(255,255,255,0.06),
   1089px 478px rgba(255,255,255,0.08),
   1456px 534px rgba(255,255,255,0.05),
     98px 654px rgba(255,255,255,0.06),
    567px 701px rgba(255,255,255,0.04),
   1234px 612px rgba(255,255,255,0.07),
   1789px 445px rgba(255,255,255,0.05),
    290px 789px rgba(255,255,255,0.06),
    754px 834px rgba(255,255,255,0.08),
   1123px 756px rgba(255,255,255,0.05),
   1567px 678px rgba(255,255,255,0.06),
     45px 912px rgba(255,255,255,0.07),
    423px 956px rgba(255,255,255,0.04),
    867px 989px rgba(255,255,255,0.06),
   1345px 934px rgba(255,255,255,0.05),
   1876px 867px rgba(255,255,255,0.07),
    234px 534px rgba(255,255,255,0.05),
    789px 312px rgba(255,255,255,0.06),
   1456px 189px rgba(255,255,255,0.08),
   1067px 267px rgba(255,255,255,0.04),
    378px 678px rgba(255,255,255,0.06),
    623px 145px rgba(255,255,255,0.07),
   1678px 823px rgba(255,255,255,0.05),
    912px 456px rgba(255,255,255,0.06),
    189px 234px rgba(255,255,255,0.08),
   1534px 123px rgba(255,255,255,0.05),
    756px 890px rgba(255,255,255,0.07),
   1289px 345px rgba(255,255,255,0.04),
    445px 123px rgba(255,255,255,0.06),
   1812px 567px rgba(255,255,255,0.05),
    234px 812px rgba(255,255,255,0.07),
    978px 723px rgba(255,255,255,0.06),
   1389px 489px rgba(255,255,255,0.08),
    567px 589px rgba(255,255,255,0.04),
   1123px 889px rgba(255,255,255,0.05),
    789px  67px rgba(255,255,255,0.07),
   1567px 345px rgba(255,255,255,0.06),
    123px 456px rgba(255,255,255,0.05),
   1834px 178px rgba(255,255,255,0.08),
    345px 267px rgba(255,255,255,0.06),
    678px 745px rgba(255,255,255,0.04),
   1234px 178px rgba(255,255,255,0.07),
   1789px 712px rgba(255,255,255,0.05);
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  .hover-lift:hover { transform: none; }
  .signal-live::after { animation: none; }
}

/* Print */
@media print {
  .no-print { display: none !important; }
  body { background: white; color: black; }
  .card { border: 1px solid #e5e7eb; background: white; }
}

/* ============================================================
   Legend of the Galactic Heroes — Subtle tactical design
   ============================================================ */

/* Star field — dark mode only, rendered as body::before */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background: transparent;
  box-shadow:
    /* 50 stars scattered across a 1920×1080 viewport */
    142px 87px 0 0 rgba(255,255,255,0.05),
    384px 203px 0 0 rgba(255,255,255,0.04),
    619px 44px 0 0 rgba(255,255,255,0.06),
    891px 312px 0 0 rgba(255,255,255,0.04),
    1124px 78px 0 0 rgba(255,255,255,0.05),
    1387px 196px 0 0 rgba(255,255,255,0.03),
    1642px 55px 0 0 rgba(255,255,255,0.06),
    1891px 287px 0 0 rgba(255,255,255,0.04),
    67px 412px 0 0 rgba(255,255,255,0.05),
    298px 567px 0 0 rgba(255,255,255,0.03),
    534px 489px 0 0 rgba(255,255,255,0.07),
    783px 621px 0 0 rgba(255,255,255,0.04),
    1012px 445px 0 0 rgba(255,255,255,0.05),
    1267px 534px 0 0 rgba(255,255,255,0.03),
    1498px 398px 0 0 rgba(255,255,255,0.06),
    1756px 512px 0 0 rgba(255,255,255,0.04),
    89px 734px 0 0 rgba(255,255,255,0.05),
    341px 812px 0 0 rgba(255,255,255,0.03),
    578px 756px 0 0 rgba(255,255,255,0.06),
    823px 889px 0 0 rgba(255,255,255,0.04),
    1089px 801px 0 0 rgba(255,255,255,0.05),
    1334px 743px 0 0 rgba(255,255,255,0.03),
    1601px 867px 0 0 rgba(255,255,255,0.07),
    1834px 712px 0 0 rgba(255,255,255,0.04),
    213px 967px 0 0 rgba(255,255,255,0.05),
    456px 1012px 0 0 rgba(255,255,255,0.03),
    712px 934px 0 0 rgba(255,255,255,0.06),
    967px 1045px 0 0 rgba(255,255,255,0.04),
    1223px 978px 0 0 rgba(255,255,255,0.05),
    1478px 1023px 0 0 rgba(255,255,255,0.03),
    /* 2nd layer — slightly brighter accent stars */
    512px 134px 0 1px rgba(147,197,253,0.06),
    987px 267px 0 1px rgba(147,197,253,0.05),
    1456px 145px 0 1px rgba(147,197,253,0.06),
    234px 678px 0 1px rgba(251,191,36,0.04),
    1678px 789px 0 1px rgba(251,191,36,0.05),
    789px 456px 0 1px rgba(147,197,253,0.04),
    1234px 623px 0 1px rgba(147,197,253,0.06),
    345px 890px 0 1px rgba(251,191,36,0.04),
    1567px 934px 0 1px rgba(147,197,253,0.05),
    890px 1023px 0 1px rgba(147,197,253,0.04),
    /* 3rd layer — tiny dim points */
    167px 345px 0 0 rgba(255,255,255,0.03),
    445px 167px 0 0 rgba(255,255,255,0.03),
    723px 289px 0 0 rgba(255,255,255,0.04),
    1001px 178px 0 0 rgba(255,255,255,0.03),
    1289px 356px 0 0 rgba(255,255,255,0.04),
    1567px 234px 0 0 rgba(255,255,255,0.03),
    1845px 412px 0 0 rgba(255,255,255,0.04),
    112px 1034px 0 0 rgba(255,255,255,0.03),
    678px 1056px 0 0 rgba(255,255,255,0.04),
    1789px 1067px 0 0 rgba(255,255,255,0.03);
}

html:not(.dark) body::before {
  display: none;
}

/* Tactical corner brackets — LoGH battle map aesthetic */
.logh-frame {
  position: relative;
}

.logh-corner {
  position: absolute;
  width: 14px;
  height: 14px;
  border-color: rgba(88, 166, 255, 0.28);
  border-style: solid;
  z-index: 2;
  pointer-events: none;
}

.logh-corner-tl { top: -1px; left: -1px; border-width: 1.5px 0 0 1.5px; }
.logh-corner-tr { top: -1px; right: -1px; border-width: 1.5px 1.5px 0 0; }
.logh-corner-bl { bottom: -1px; left: -1px; border-width: 0 0 1.5px 1.5px; }
.logh-corner-br { bottom: -1px; right: -1px; border-width: 0 1.5px 1.5px 0; }
